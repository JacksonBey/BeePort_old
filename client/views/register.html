<!DOCTYPE html>
<html>
  <head>
    <title>
      Beeport
    </title>
  </head>
  <body>
    <div id="app">
      <div class="container">
        <div class="row">
          <div class="col-md-12">
            <div class="jumbotron">
              <h1>
                Beeport Register SCREEn
              </h1>
              <p>
                Beeport is a web application that allows you to create and manage your own personal portfolio.
              </p>
              <p>
                <!-- username password form to log in -->
                <form onsubmit="signUp(event, this)">
                  <div class="form-group">
                    <label for="username">
                      Username
                    </label>
                    <input type="text" class="form-control" name="username" placeholder="Enter Username">
                  </div>
                  <div class="form-group">
                    <label for="password">
                      Password
                    </label>
                    <input type="password" class="form-control" name="password" placeholder="Enter Password">
                  </div>
                  <div class="form-group">
                    <label for="role">
                      role
                    </label>
                    <input type="role" class="form-control" name="role" placeholder="admin moderator or user">
                  </div>
                  <div class="form-group">
                    <label for="email">
                      email
                    </label>
                    <input type="email" class="form-control" name="email" placeholder="ur email plz">
                  </div>
                  <button type="submit" class="btn btn-primary">
                    Register
                  </button>
                </form>
                <a class="btn btn-success btn-lg" href="/" role="button">
                  Back
                </a>
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
  <script>
  //TOBE moved to user.controller.js
  function signUp(e, form) {
    e.preventDefault();
    let data = {
      username: form.username.value,
      password: form.password.value,
      role: form.role.value,
      email: form.email.value

    };
    fetch('/api/auth/signup', {
      method: 'POST',
      body:  JSON.stringify(data)
    }).then(function(response) {
      return response.json();
    }).then(function(data) {
      console.log(data);
      if (data.success) {
        window.location.href = '/';
      } else {
        alert(data.message);
      }
    });

  }
  </script>
</html>